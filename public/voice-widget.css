/*
   JOHNNY: THE CYBERNETIC ASSISTANT
   A premium 3D robot head with expressive optics
*/

:root {
    --robot-size: 320px;
    --plating-bg: rgba(15, 23, 42, 0.85);
    --visor-glow: #00d4ff;
    --accent-gold: #fbbf24;
    --accent-red: #ef4444;
}

#voice-widget-container {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2147483647;
    font-family: 'Inter', system-ui, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    pointer-events: none;
    width: 100vw;
    height: 100vh;
}

/* The Robot Helmet/Head */
.voice-widget-card {
    position: relative;
    pointer-events: auto;
    width: var(--robot-size);
    height: calc(var(--robot-size) * 1.2);
    background: var(--plating-bg);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);

    /* Sleek Robot Head Shape */
    border-radius: 80px 80px 120px 120px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow:
        0 40px 100px rgba(0, 0, 0, 0.8),
        inset 0 0 40px rgba(0, 212, 255, 0.1);

    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 40px;
    transition: all 0.8s cubic-bezier(0.19, 1, 0.22, 1);
    cursor: pointer;
    animation: robotFloat 6s ease-in-out infinite;
}

/* Mechanical Ear/Side Panels */
.voice-widget-card::before,
.voice-widget-card::after {
    content: '';
    position: absolute;
    top: 50%;
    width: 30px;
    height: 80px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 10px;
}

.voice-widget-card::before {
    left: -15px;
    transform: translateY(-50%);
}

.voice-widget-card::after {
    right: -15px;
    transform: translateY(-50%);
}

/* The Visor/Eyes */
.visor {
    width: 85%;
    height: 70px;
    background: #050814;
    border-radius: 20px;
    border: 2px solid rgba(0, 212, 255, 0.3);
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: inset 0 0 20px rgba(0, 212, 255, 0.2);
}

.eye-strip {
    width: 70%;
    height: 6px;
    background: var(--visor-glow);
    border-radius: 10px;
    box-shadow: 0 0 20px var(--visor-glow);
    transition: all 0.4s ease;
}

/* Jaw/Talking Part */
.jaw {
    margin-top: auto;
    width: 60%;
    height: 40px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px 10px 40px 40px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    margin-bottom: 30px;
    transition: all 0.3s ease;
}

/* Shifting States */
.voice-widget-card[data-state="idle"] {
    --visor-glow: #00d4ff;
}

.voice-widget-card[data-state="listening"] {
    --visor-glow: var(--accent-gold);
    transform: scale(1.05);
}

.voice-widget-card[data-state="listening"] .eye-strip {
    width: 80%;
    height: 10px;
    animation: visorPulse 1.5s infinite;
}

.voice-widget-card[data-state="speaking"] {
    @keyframes morphEdge {

        0%,
        100% {
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
        }

        25% {
            border-radius: 40% 60% 70% 40% / 50% 40% 60% 45%;
        }

        50% {
            border-radius: 30% 50% 60% 80% / 70% 30% 40% 60%;
        }

        75% {
            border-radius: 65% 35% 45% 55% / 45% 65% 35% 55%;
        }
    }

    @keyframes float {

        0%,
        100% {
            transform: translate(0, 0);
        }

        50% {
            transform: translate(10px, -40px);
        }
    }

    @keyframes speakingPulse {

        0%,
        100% {
            transform: scale(1);
            filter: brightness(1);
        }

        50% {
            transform: scale(1.1);
            filter: brightness(1.3);
        }
    }

    @keyframes colorFlow {
        0% {
            filter: hue-rotate(0deg) contrast(1.2);
        }

        100% {
            filter: hue-rotate(360deg) contrast(1.2);
        }
    }

    /* Minimalist floating captions */
    .captions-area {
        position: absolute;
        bottom: 8vh;
        font-size: 1.8rem;
        font-weight: 200;
        letter-spacing: 0.15em;
        color: white;
        text-align: center;
        width: 80%;
        text-transform: uppercase;
        text-shadow: 0 0 20px rgba(0, 0, 0, 0.6);
    }